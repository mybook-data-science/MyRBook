<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 19 ggplot2 | Learning R for Data Science</title>
  <meta name="description" content="These are notes gathering my experience in R for data science.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 19 ggplot2 | Learning R for Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are notes gathering my experience in R for data science." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 19 ggplot2 | Learning R for Data Science" />
  
  <meta name="twitter:description" content="These are notes gathering my experience in R for data science." />
  

<meta name="author" content="Antonio Fidalgo">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="dplyr.html">
<link rel="next" href="functionals.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Learning R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="1" data-path="getsarted.html"><a href="getsarted.html"><i class="fa fa-check"></i><b>1</b> Getting started</a><ul>
<li class="chapter" data-level="1.1" data-path="getsarted.html"><a href="getsarted.html#install-applications"><i class="fa fa-check"></i><b>1.1</b> Install applications</a></li>
<li class="chapter" data-level="1.2" data-path="getsarted.html"><a href="getsarted.html#sign-for-github"><i class="fa fa-check"></i><b>1.2</b> Sign for GitHub</a></li>
<li class="chapter" data-level="1.3" data-path="getsarted.html"><a href="getsarted.html#create-your-project"><i class="fa fa-check"></i><b>1.3</b> Create your project</a></li>
<li class="chapter" data-level="1.4" data-path="getsarted.html"><a href="getsarted.html#create-github-repo-and-link-your-machine-to-it"><i class="fa fa-check"></i><b>1.4</b> Create GitHub repo and link your machine to it</a></li>
<li class="chapter" data-level="1.5" data-path="getsarted.html"><a href="getsarted.html#collaboration-on-github"><i class="fa fa-check"></i><b>1.5</b> Collaboration on GitHub</a></li>
</ul></li>
<li class="part"><span><b>I Source and output files</b></span></li>
<li class="chapter" data-level="2" data-path="rmd.html"><a href="rmd.html"><i class="fa fa-check"></i><b>2</b> <code>.Rmd</code> source files</a><ul>
<li class="chapter" data-level="2.1" data-path="rmd.html"><a href="rmd.html#options-for-all-chunks"><i class="fa fa-check"></i><b>2.1</b> Options for all chunks</a></li>
<li class="chapter" data-level="2.2" data-path="rmd.html"><a href="rmd.html#latex"><i class="fa fa-check"></i><b>2.2</b> Latex code</a></li>
<li class="chapter" data-level="2.3" data-path="rmd.html"><a href="rmd.html#figures"><i class="fa fa-check"></i><b>2.3</b> Figures</a></li>
<li class="chapter" data-level="2.4" data-path="rmd.html"><a href="rmd.html#cr"><i class="fa fa-check"></i><b>2.4</b> Cross-references</a></li>
<li class="chapter" data-level="2.5" data-path="rmd.html"><a href="rmd.html#citations"><i class="fa fa-check"></i><b>2.5</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="custom-ouptut.html"><a href="custom-ouptut.html"><i class="fa fa-check"></i><b>3</b> Customize output</a><ul>
<li class="chapter" data-level="3.1" data-path="custom-ouptut.html"><a href="custom-ouptut.html#multiple-built-in-output-types"><i class="fa fa-check"></i><b>3.1</b> Multiple built-in output types</a></li>
<li class="chapter" data-level="3.2" data-path="custom-ouptut.html"><a href="custom-ouptut.html#new-types-provided-by-packages"><i class="fa fa-check"></i><b>3.2</b> New types provided by packages</a></li>
<li class="chapter" data-level="3.3" data-path="custom-ouptut.html"><a href="custom-ouptut.html#css-custom-html"><i class="fa fa-check"></i><b>3.3</b> CSS: custom html</a></li>
<li class="chapter" data-level="3.4" data-path="custom-ouptut.html"><a href="custom-ouptut.html#latex-preamble"><i class="fa fa-check"></i><b>3.4</b> Latex preamble</a></li>
</ul></li>
<li class="part"><span><b>II R Basics</b></span></li>
<li class="chapter" data-level="4" data-path="rcalc.html"><a href="rcalc.html"><i class="fa fa-check"></i><b>4</b> R as a calculator</a><ul>
<li class="chapter" data-level="4.1" data-path="rcalc.html"><a href="rcalc.html#usual-operators"><i class="fa fa-check"></i><b>4.1</b> Usual operators</a></li>
<li class="chapter" data-level="4.2" data-path="rcalc.html"><a href="rcalc.html#unusual-operators"><i class="fa fa-check"></i><b>4.2</b> Unusual operators</a></li>
<li class="chapter" data-level="4.3" data-path="rcalc.html"><a href="rcalc.html#usual-functions"><i class="fa fa-check"></i><b>4.3</b> Usual functions</a></li>
<li class="chapter" data-level="4.4" data-path="rcalc.html"><a href="rcalc.html#unusual-functions"><i class="fa fa-check"></i><b>4.4</b> Unusual functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="datastructures.html"><a href="datastructures.html"><i class="fa fa-check"></i><b>5</b> Data stuctures</a><ul>
<li class="chapter" data-level="5.1" data-path="datastructures.html"><a href="datastructures.html#atomic-vectors"><i class="fa fa-check"></i><b>5.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="5.2" data-path="datastructures.html"><a href="datastructures.html#matrices-and-arrays"><i class="fa fa-check"></i><b>5.2</b> Matrices and arrays</a></li>
<li class="chapter" data-level="5.3" data-path="datastructures.html"><a href="datastructures.html#lists"><i class="fa fa-check"></i><b>5.3</b> Lists</a></li>
<li class="chapter" data-level="5.4" data-path="datastructures.html"><a href="datastructures.html#data-frames"><i class="fa fa-check"></i><b>5.4</b> Data frames</a></li>
<li class="chapter" data-level="5.5" data-path="datastructures.html"><a href="datastructures.html#a-word-about-attributes"><i class="fa fa-check"></i><b>5.5</b> A word about attributes</a></li>
<li class="chapter" data-level="5.6" data-path="datastructures.html"><a href="datastructures.html#environments"><i class="fa fa-check"></i><b>5.6</b> Environments</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="simple-functions-on-vectors.html"><a href="simple-functions-on-vectors.html"><i class="fa fa-check"></i><b>6</b> Simple functions on vectors</a><ul>
<li class="chapter" data-level="6.1" data-path="simple-functions-on-vectors.html"><a href="simple-functions-on-vectors.html#element-by-element-evaluation"><i class="fa fa-check"></i><b>6.1</b> Element by element evaluation</a></li>
<li class="chapter" data-level="6.2" data-path="simple-functions-on-vectors.html"><a href="simple-functions-on-vectors.html#recycling-rule"><i class="fa fa-check"></i><b>6.2</b> Recycling rule</a></li>
<li class="chapter" data-level="6.3" data-path="simple-functions-on-vectors.html"><a href="simple-functions-on-vectors.html#functions-for-the-whole-vector"><i class="fa fa-check"></i><b>6.3</b> Functions for the whole vector</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="subset.html"><a href="subset.html"><i class="fa fa-check"></i><b>7</b> Subsetting</a><ul>
<li class="chapter" data-level="7.1" data-path="subset.html"><a href="subset.html#section"><i class="fa fa-check"></i><b>7.1</b> <code>[]</code></a></li>
<li class="chapter" data-level="7.2" data-path="subset.html"><a href="subset.html#section-1"><i class="fa fa-check"></i><b>7.2</b> <code>[[]]</code></a></li>
<li class="chapter" data-level="7.3" data-path="subset.html"><a href="subset.html#section-2"><i class="fa fa-check"></i><b>7.3</b> <code>$</code></a></li>
<li class="chapter" data-level="7.4" data-path="subset.html"><a href="subset.html#combining-subsetting"><i class="fa fa-check"></i><b>7.4</b> Combining subsetting</a></li>
<li class="chapter" data-level="7.5" data-path="subset.html"><a href="subset.html#subsetting-with-one-condition"><i class="fa fa-check"></i><b>7.5</b> Subsetting with one condition</a></li>
<li class="chapter" data-level="7.6" data-path="subset.html"><a href="subset.html#subsetting-and-assignment"><i class="fa fa-check"></i><b>7.6</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="7.7" data-path="subset.html"><a href="subset.html#using-which"><i class="fa fa-check"></i><b>7.7</b> Using <code>which()</code></a></li>
<li class="chapter" data-level="7.8" data-path="subset.html"><a href="subset.html#more-advanced-stuff"><i class="fa fa-check"></i><b>7.8</b> More advanced stuff</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conditions.html"><a href="conditions.html"><i class="fa fa-check"></i><b>8</b> Conditions</a><ul>
<li class="chapter" data-level="8.1" data-path="conditions.html"><a href="conditions.html#if-statement"><i class="fa fa-check"></i><b>8.1</b> <code>if</code> statement</a></li>
<li class="chapter" data-level="8.2" data-path="conditions.html"><a href="conditions.html#else-statement"><i class="fa fa-check"></i><b>8.2</b> <code>else</code> statement</a></li>
<li class="chapter" data-level="8.3" data-path="conditions.html"><a href="conditions.html#else-if-statement"><i class="fa fa-check"></i><b>8.3</b> <code>else if</code> statement</a></li>
<li class="chapter" data-level="8.4" data-path="conditions.html"><a href="conditions.html#ifelse-statement"><i class="fa fa-check"></i><b>8.4</b> <code>ifelse</code> statement</a></li>
<li class="chapter" data-level="8.5" data-path="conditions.html"><a href="conditions.html#logical-operators-and"><i class="fa fa-check"></i><b>8.5</b> Logical operators: <code>&amp;</code>, <code>|</code> and <code>!</code></a></li>
<li class="chapter" data-level="8.6" data-path="conditions.html"><a href="conditions.html#writing-and-interpreting-a-condition"><i class="fa fa-check"></i><b>8.6</b> Writing and interpreting a condition</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>9</b> Functions</a><ul>
<li class="chapter" data-level="9.1" data-path="functions.html"><a href="functions.html#structure-of-a-simple-function"><i class="fa fa-check"></i><b>9.1</b> Structure of a simple function</a></li>
<li class="chapter" data-level="9.2" data-path="functions.html"><a href="functions.html#multiple-arguments-and-their-identification"><i class="fa fa-check"></i><b>9.2</b> Multiple arguments and their identification</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>10</b> Loops (avoid them)</a><ul>
<li class="chapter" data-level="10.1" data-path="loops.html"><a href="loops.html#introduction-to-loops-with-a-silly-example-bad-r-coding"><i class="fa fa-check"></i><b>10.1</b> Introduction to loops with a silly example (bad R coding)</a></li>
<li class="chapter" data-level="10.2" data-path="loops.html"><a href="loops.html#general-form-of-a-for-loop"><i class="fa fa-check"></i><b>10.2</b> General form of a <code>for</code> loop</a></li>
<li class="chapter" data-level="10.3" data-path="loops.html"><a href="loops.html#a-good-example-of-a-loop"><i class="fa fa-check"></i><b>10.3</b> A good example of a loop</a></li>
<li class="chapter" data-level="10.4" data-path="loops.html"><a href="loops.html#looping-over-non-numeric-elements"><i class="fa fa-check"></i><b>10.4</b> Looping over non-numeric elements</a></li>
<li class="chapter" data-level="10.5" data-path="loops.html"><a href="loops.html#more-advanced-stuff-1"><i class="fa fa-check"></i><b>10.5</b> More advanced stuff</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>11</b> Import data to R</a><ul>
<li class="chapter" data-level="11.1" data-path="import.html"><a href="import.html#reading-rectangular-data"><i class="fa fa-check"></i><b>11.1</b> Reading rectangular data</a></li>
<li class="chapter" data-level="11.2" data-path="import.html"><a href="import.html#read-other-data-types"><i class="fa fa-check"></i><b>11.2</b> Read other data types</a></li>
<li class="chapter" data-level="11.3" data-path="import.html"><a href="import.html#scanning-a-file"><i class="fa fa-check"></i><b>11.3</b> Scanning a file</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="splots.html"><a href="splots.html"><i class="fa fa-check"></i><b>12</b> Simple plots</a><ul>
<li class="chapter" data-level="12.1" data-path="splots.html"><a href="splots.html#line-plots"><i class="fa fa-check"></i><b>12.1</b> Line plots</a></li>
<li class="chapter" data-level="12.2" data-path="splots.html"><a href="splots.html#bar-graphs-and-histograms"><i class="fa fa-check"></i><b>12.2</b> Bar graphs and histograms</a></li>
</ul></li>
<li class="part"><span><b>III Tidyverse</b></span></li>
<li class="chapter" data-level="13" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>13</b> What is <code>tidyverse</code></a></li>
<li class="chapter" data-level="14" data-path="tibble.html"><a href="tibble.html"><i class="fa fa-check"></i><b>14</b> <code>tibble</code></a><ul>
<li class="chapter" data-level="14.1" data-path="tibble.html"><a href="tibble.html#creating-a-tibble"><i class="fa fa-check"></i><b>14.1</b> Creating a tibble</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="readr.html"><a href="readr.html"><i class="fa fa-check"></i><b>15</b> <code>readr</code> and <code>readxl</code></a><ul>
<li class="chapter" data-level="15.1" data-path="readr.html"><a href="readr.html#readr-1"><i class="fa fa-check"></i><b>15.1</b> <code>readr</code></a></li>
<li class="chapter" data-level="15.2" data-path="readr.html"><a href="readr.html#readxl"><i class="fa fa-check"></i><b>15.2</b> <code>readxl</code></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="magrittr.html"><a href="magrittr.html"><i class="fa fa-check"></i><b>16</b> <code>magrittr</code></a><ul>
<li class="chapter" data-level="16.1" data-path="magrittr.html"><a href="magrittr.html#how-to-pipe"><i class="fa fa-check"></i><b>16.1</b> How to pipe</a></li>
<li class="chapter" data-level="16.2" data-path="magrittr.html"><a href="magrittr.html#using-a-placeholder"><i class="fa fa-check"></i><b>16.2</b> Using a placeholder</a></li>
<li class="chapter" data-level="16.3" data-path="magrittr.html"><a href="magrittr.html#multiple-placeholders"><i class="fa fa-check"></i><b>16.3</b> Multiple placeholders</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>17</b> <code>tidyr</code></a><ul>
<li class="chapter" data-level="17.1" data-path="tidyr.html"><a href="tidyr.html#gather"><i class="fa fa-check"></i><b>17.1</b> <code>gather</code></a></li>
<li class="chapter" data-level="17.2" data-path="tidyr.html"><a href="tidyr.html#spread"><i class="fa fa-check"></i><b>17.2</b> <code>spread</code></a></li>
<li class="chapter" data-level="17.3" data-path="tidyr.html"><a href="tidyr.html#separate"><i class="fa fa-check"></i><b>17.3</b> <code>separate</code></a></li>
<li class="chapter" data-level="17.4" data-path="tidyr.html"><a href="tidyr.html#unite"><i class="fa fa-check"></i><b>17.4</b> <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>18</b> <code>dplyr</code></a><ul>
<li class="chapter" data-level="18.1" data-path="dplyr.html"><a href="dplyr.html#grammar-of-data-manipulation"><i class="fa fa-check"></i><b>18.1</b> Grammar of data manipulation</a></li>
<li class="chapter" data-level="18.2" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>18.2</b> <code>select</code></a></li>
<li class="chapter" data-level="18.3" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>18.3</b> <code>mutate</code></a></li>
<li class="chapter" data-level="18.4" data-path="dplyr.html"><a href="dplyr.html#filter"><i class="fa fa-check"></i><b>18.4</b> <code>filter</code></a></li>
<li class="chapter" data-level="18.5" data-path="dplyr.html"><a href="dplyr.html#arrange"><i class="fa fa-check"></i><b>18.5</b> <code>arrange</code></a></li>
<li class="chapter" data-level="18.6" data-path="dplyr.html"><a href="dplyr.html#summarise"><i class="fa fa-check"></i><b>18.6</b> <code>summarise</code></a></li>
<li class="chapter" data-level="18.7" data-path="dplyr.html"><a href="dplyr.html#piping-verbs"><i class="fa fa-check"></i><b>18.7</b> Piping verbs</a></li>
<li class="chapter" data-level="18.8" data-path="dplyr.html"><a href="dplyr.html#group_by"><i class="fa fa-check"></i><b>18.8</b> <code>group_by</code></a></li>
<li class="chapter" data-level="18.9" data-path="dplyr.html"><a href="dplyr.html#keys-for-joins"><i class="fa fa-check"></i><b>18.9</b> Keys for joins</a></li>
<li class="chapter" data-level="18.10" data-path="dplyr.html"><a href="dplyr.html#joins"><i class="fa fa-check"></i><b>18.10</b> Joins</a></li>
<li class="chapter" data-level="18.11" data-path="dplyr.html"><a href="dplyr.html#operations-on-data-sets"><i class="fa fa-check"></i><b>18.11</b> Operations on data sets</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>19</b> <code>ggplot2</code></a><ul>
<li class="chapter" data-level="19.1" data-path="ggplot2.html"><a href="ggplot2.html#comparison-with-base-plot"><i class="fa fa-check"></i><b>19.1</b> Comparison with base <code>plot</code></a></li>
<li class="chapter" data-level="19.2" data-path="ggplot2.html"><a href="ggplot2.html#grammar-of-graphics---leland-wilkinson"><i class="fa fa-check"></i><b>19.2</b> Grammar of graphics - Leland Wilkinson</a></li>
<li class="chapter" data-level="19.3" data-path="ggplot2.html"><a href="ggplot2.html#understanding-the-grammar"><i class="fa fa-check"></i><b>19.3</b> Understanding the grammar</a></li>
<li class="chapter" data-level="19.4" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics-1"><i class="fa fa-check"></i><b>19.4</b> Aesthetics</a></li>
<li class="chapter" data-level="19.5" data-path="ggplot2.html"><a href="ggplot2.html#geometries-1"><i class="fa fa-check"></i><b>19.5</b> Geometries</a></li>
</ul></li>
<li class="part"><span><b>IV Intermediate R</b></span></li>
<li class="chapter" data-level="20" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>20</b> Functionals</a><ul>
<li class="chapter" data-level="20.1" data-path="functionals.html"><a href="functionals.html#the-apply-family"><i class="fa fa-check"></i><b>20.1</b> The <code>apply</code> family</a></li>
<li class="chapter" data-level="20.2" data-path="functionals.html"><a href="functionals.html#apply"><i class="fa fa-check"></i><b>20.2</b> <code>apply</code></a></li>
<li class="chapter" data-level="20.3" data-path="functionals.html"><a href="functionals.html#lapply"><i class="fa fa-check"></i><b>20.3</b> <code>lapply</code></a></li>
<li class="chapter" data-level="20.4" data-path="functionals.html"><a href="functionals.html#sapply"><i class="fa fa-check"></i><b>20.4</b> <code>sapply</code></a></li>
<li class="chapter" data-level="20.5" data-path="functionals.html"><a href="functionals.html#multicore-implementation"><i class="fa fa-check"></i><b>20.5</b> Multicore implementation</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>21</b> Scoping</a><ul>
<li class="chapter" data-level="21.1" data-path="scoping.html"><a href="scoping.html#introduction"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="scoping.html"><a href="scoping.html#rule-1-name-masking"><i class="fa fa-check"></i><b>21.2</b> Rule 1: name masking</a></li>
<li class="chapter" data-level="21.3" data-path="scoping.html"><a href="scoping.html#rule-2-fresh-start"><i class="fa fa-check"></i><b>21.3</b> Rule 2: fresh start</a></li>
<li class="chapter" data-level="21.4" data-path="scoping.html"><a href="scoping.html#rule-3-dynamic-lookup"><i class="fa fa-check"></i><b>21.4</b> Rule 3: dynamic lookup</a></li>
<li class="chapter" data-level="21.5" data-path="scoping.html"><a href="scoping.html#functions-inside-functions"><i class="fa fa-check"></i><b>21.5</b> Functions inside functions</a></li>
<li class="chapter" data-level="21.6" data-path="scoping.html"><a href="scoping.html#examples"><i class="fa fa-check"></i><b>21.6</b> Examples</a></li>
</ul></li>
<li class="part"><span><b>V Conclusion</b></span></li>
<li class="chapter" data-level="22" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>22</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2" class="section level1">
<h1><span class="header-section-number">Chapter 19</span> <code>ggplot2</code></h1>
<p>Data visualization is part of the skill set of a data scientist.<br />
It is made to, either
- explore (confirm, analyse)
- explain (inform, convince)
Depends who you communicate to (can be you).</p>
<div id="comparison-with-base-plot" class="section level2">
<h2><span class="header-section-number">19.1</span> Comparison with base <code>plot</code></h2>
<p>Limitations of base plot
- plot does not redraw, i.e., the range will not adapt to new data
- plot is drawn as an image, i.e., it’s not an object
- manual legend
- no unified framework for plotting, i.e., need to master other commands for other types of graphs</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">rm</span>(mtcarts)
<span class="co">#R&gt; Warning in rm(mtcarts): object &#39;mtcarts&#39; not found</span>
<span class="kw">data</span>(<span class="st">&quot;mtcars&quot;</span>)
mtcars<span class="op">$</span>cyl &lt;-<span class="st"> </span><span class="kw">as.factor</span>(mtcars<span class="op">$</span>cyl) <span class="co"># treat &#39;cyl&#39; as a factor</span>

<span class="kw">plot</span>(mtcars<span class="op">$</span>wt, mtcars<span class="op">$</span>mpg, <span class="dt">col =</span> mtcars<span class="op">$</span>cyl)
<span class="kw">abline</span>(<span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> mtcars), <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">lapply</span>(mtcars<span class="op">$</span>cyl, <span class="cf">function</span>(x) {
  <span class="kw">abline</span>(<span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, mtcars, <span class="dt">subset =</span> (cyl <span class="op">==</span><span class="st"> </span>x)), <span class="dt">col =</span> x)
  })
<span class="kw">legend</span>(<span class="dt">x =</span> <span class="dv">5</span>, <span class="dt">y =</span> <span class="dv">33</span>, <span class="dt">legend =</span> <span class="kw">levels</span>(mtcars<span class="op">$</span>cyl),<span class="dt">col =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">pch =</span> <span class="dv">1</span>, <span class="dt">bty =</span> <span class="st">&quot;n&quot;</span>)
       
plot1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg, <span class="dt">col =</span> <span class="kw">factor</span>(cyl))) <span class="op">+</span>
<span class="st">         </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">         </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span>lm , <span class="dt">se=</span><span class="ot">FALSE</span>, <span class="kw">aes</span>(<span class="dt">col=</span>cyl)) <span class="op">+</span>
<span class="st">         </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span>lm , <span class="dt">se=</span><span class="ot">FALSE</span>, <span class="dt">linetype=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="st">&quot;grey&quot;</span>, <span class="kw">aes</span>(<span class="dt">group=</span><span class="dv">1</span>))       
plot1 <span class="co"># print the object &#39;plot1&#39;</span></code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-114-1.png" width="672" /><img src="MyR_files/figure-html/unnamed-chunk-114-2.png" width="672" /></p>
</div>
<div id="grammar-of-graphics---leland-wilkinson" class="section level2">
<h2><span class="header-section-number">19.2</span> Grammar of graphics - Leland Wilkinson</h2>
<div id="a-graphic-layers-of-grammatical-elements" class="section level3">
<h3><span class="header-section-number">19.2.1</span> A graphic = layers of grammatical elements</h3>
<p>The layers are the adjectives and the nouns
Seven grammatical elements, three are essential</p>
</div>
<div id="meaningful-plots-are-built-around-appropriate-aesthetic-mappings" class="section level3">
<h3><span class="header-section-number">19.2.2</span> Meaningful plots are built around appropriate aesthetic mappings</h3>
<p>The mappings are the rules to assemble the nouns and adjectives</p>
</div>
</div>
<div id="understanding-the-grammar" class="section level2">
<h2><span class="header-section-number">19.3</span> Understanding the grammar</h2>
<p>Building an example</p>
<pre class="sourceCode r"><code class="sourceCode r">
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>diamonds, <span class="dt">mapping=</span> <span class="kw">aes</span>(<span class="dt">x=</span>carat, <span class="dt">y=</span> price)) <span class="co"># data and mappings</span>

<span class="co">#p2 &lt;- p1 + geom_point()  # + the general form</span>

p2 &lt;-<span class="st"> </span>p1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()  <span class="co"># + the general form</span>

p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x=</span>carat, <span class="dt">y=</span> price, <span class="dt">col=</span>clarity)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>() <span class="co"># adding a mapping / variable</span>

p3b &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x=</span>carat, <span class="dt">y=</span> price)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">col=</span><span class="st">&quot;red&quot;</span>) <span class="co"># adding a attribute</span>


p4 &lt;-<span class="st"> </span>p1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>clarity)) <span class="co"># or changing some attributes</span>
<span class="kw">grid.arrange</span>(p1, p2, p3, p4, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-115-1.png" width="672" /></p>
<div id="data-and-proper-data-format" class="section level3">
<h3><span class="header-section-number">19.3.1</span> Data and proper data format</h3>
<p>The data being plotted
Includes: variables of interest
Tidy data helps make good <code>ggplot()</code>s</p>
<pre class="sourceCode r"><code class="sourceCode r">iris.tidy &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(key, Value, <span class="op">-</span>Species) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">&quot;Part&quot;</span>, <span class="st">&quot;Measure&quot;</span>), <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.&quot;</span>)

p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris.tidy, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Value, <span class="dt">col =</span> Part)) <span class="op">+</span>
<span class="kw">geom_jitter</span>() <span class="op">+</span>
<span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>Measure)

p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris.tidy, <span class="kw">aes</span>(<span class="dt">x =</span> Measure, <span class="dt">y =</span> Value, <span class="dt">col =</span> Part)) <span class="op">+</span>
<span class="kw">geom_jitter</span>() <span class="op">+</span>
<span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>Species)


p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris.tidy, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Value, <span class="dt">col =</span> Part)) <span class="op">+</span>
<span class="kw">geom_point</span>()

<span class="kw">grid.arrange</span>(p1, p2, p3, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-116-1.png" width="672" /></p>
</div>
<div id="aesthetics" class="section level3">
<h3><span class="header-section-number">19.3.2</span> Aesthetics</h3>
<p>The scales onto which we map our data
Includes: x-axis, y-axis, colour, fill, size, labels, line width, line type,…</p>
</div>
<div id="geometries" class="section level3">
<h3><span class="header-section-number">19.3.3</span> Geometries</h3>
<p>The visual elements (shape) used for our data in the plot
Includes: point, line, histogram, bar, boxplot,…</p>
</div>
<div id="other-grammatical-elements" class="section level3">
<h3><span class="header-section-number">19.3.4</span> Other grammatical elements</h3>
<p>These are
- facets
- statistics
- coordinates
- themes</p>
</div>
<div id="juggling-with-aes" class="section level3">
<h3><span class="header-section-number">19.3.5</span> Juggling with <code>aes</code></h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;mtcars&quot;</span>)
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>()

<span class="co"># color dependent on &#39;disp&#39;,</span>
<span class="co"># &#39;disp&#39; is continuous, hence the shades of same colour</span>
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg, <span class="dt">col =</span> disp)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>()  <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">se=</span><span class="ot">FALSE</span>)

<span class="co"># changing the colour depending on the variable &#39;clarity&#39;, </span>
<span class="co"># &#39;clarity&#39; is a factor, hence the different colours</span>
p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">col=</span>clarity)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_smooth</span>()

<span class="co"># size dependent on &#39;disp&#39;</span>
p4 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg, <span class="dt">size =</span> disp)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>()

<span class="kw">grid.arrange</span>(p1, p2, p3, p4, <span class="dt">ncol=</span><span class="dv">2</span>)
<span class="co">#R&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span>
<span class="co">#R&gt; `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</span></code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-117-1.png" width="672" /></p>
</div>
<div id="juggling-with-geom" class="section level3">
<h3><span class="header-section-number">19.3.6</span> Juggling with <code>geom</code></h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># points and smoother layer</span>
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">se=</span><span class="ot">TRUE</span>) <span class="co"># se = T by default</span>

<span class="co"># only the smoother layer</span>
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>()

<span class="co"># changing the parameters of the point geometry, much more transparent, here</span>
p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span>.<span class="dv">04</span>)

<span class="co"># only the smoother layer and different aesthetics,</span>
<span class="co"># aes recognizes the groups and therefore separates for them</span>
p4 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">col=</span>clarity)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_smooth</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span>.<span class="dv">04</span>)

<span class="kw">grid.arrange</span>(p1, p2, p3,p4,  <span class="dt">ncol=</span><span class="dv">2</span>)
<span class="co">#R&gt; `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</span>
<span class="co">#R&gt; `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</span>
<span class="co">#R&gt; `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</span></code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-118-1.png" width="672" /></p>
</div>
</div>
<div id="aesthetics-1" class="section level2">
<h2><span class="header-section-number">19.4</span> Aesthetics</h2>
<div id="understanding-aesthetics" class="section level3">
<h3><span class="header-section-number">19.4.1</span> Understanding aesthetics</h3>
<p>Usually considered as how something looks, as attributes: that’s <em>notcorrect in <code>ggplot()</code>
Aesthetics refers to what a variable is </em>mappedonto it
<em>Aesthetics is mapping</em>
We want to map as many variables as possible in a plot, that’s visible aesthetics
Aesthetics/mappings are called in <code>aes()</code> while attributes are called in <code>geom_()</code></p>
<p>For instance:
- <code>aes(x = variable1, ...)</code> means ‘variable1’ is mapped onto the x-axis
- <code>aes(..., col = variable2)</code> means that ‘variable2’ is mapped onto a colour</p>
<p>Simply changing the colour of the dots, is NOT aesthetics
- <code>ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point(col="red")</code>
because there is no mapping
<code>aes()</code> includes: x-axis, y-axis, colour, fill, size, alpha, labels, line width, line type,…
Some aesthetics are only applicable to categorical variables: e.g., label and shape</p>
<pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg, <span class="dt">col =</span> cyl)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">shape =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">4</span>)
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>qsec,<span class="dt">size=</span>(hp<span class="op">/</span>wt), <span class="dt">shape=</span><span class="kw">factor</span>(am), <span class="dt">col=</span><span class="kw">factor</span>(cyl))) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>()

<span class="kw">grid.arrange</span>(p1, p2,  <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-119-1.png" width="672" /></p>
<p>Attributes go to <code>geom_</code></p>
</div>
<div id="modifying-aesthetics" class="section level3">
<h3><span class="header-section-number">19.4.2</span> Modifying aesthetics</h3>
<p>Modifying aesthetics is modifying the mapping</p>
<p><code>position</code> defaults to <code>identity</code>, <code>jitter</code> adds some random noise to the observations so that they do not overlap</p>
<pre class="sourceCode r"><code class="sourceCode r">
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Sepal.Width, <span class="dt">col=</span>Species)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>()
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Sepal.Width, <span class="dt">col=</span>Species)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">position=</span><span class="st">&quot;jitter&quot;</span>)

<span class="kw">grid.arrange</span>(p1, p2,  <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-120-1.png" width="672" /></p>
<p><code>scale_..._...(variable1, args)</code> modifies the scale of the mapping of ‘variable1’ with several arguments such as <code>limits</code>, <code>breaks</code>, etc…
Sometimes, you need to assign a dummy to the aesthetics, e.g., when you want to plot only one variable</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars<span class="op">$</span>mydummy &lt;-<span class="st"> </span><span class="dv">1</span>
 
<span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y=</span>mydummy, <span class="dt">col=</span><span class="kw">factor</span>(cyl))) <span class="op">+</span><span class="st"> </span>
<span class="kw">geom_jitter</span>() <span class="op">+</span><span class="st"> </span>
<span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">0</span>,<span class="dv">2</span>)) <span class="op">+</span><span class="st"> </span>
<span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;My nice graph&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Miles per gallon&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>, <span class="dt">col=</span><span class="st">&quot;Cylindres&quot;</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
</div>
</div>
<div id="geometries-1" class="section level2">
<h2><span class="header-section-number">19.5</span> Geometries</h2>
<p>Geometries control how your plot is going to look like: currently, there are more than 37 gemoetries available
Common plots are: scatter, bar, line plots
Geometries required some aesthetics and can take other aesthetics as optional
Geometries can take their own aesthetics (useful to control mappings of each layer)
Geometries can take their own data, too!</p>
<div id="scatter-plots" class="section level3">
<h3><span class="header-section-number">19.5.1</span> Scatter plots</h3>
<p>We’ve seen a lot, already: recall <code>geom_point()</code></p>
</div>
<div id="bar-plots" class="section level3">
<h3><span class="header-section-number">19.5.2</span> Bar plots</h3>
<p>The simplest is a histogram</p>
<pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length)) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>)
p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">fill=</span>Species)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_histogram</span>()
p4 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">fill=</span>Species)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_histogram</span>(<span class="dt">position=</span><span class="st">&quot;dodge&quot;</span>) <span class="co"># or &quot;stack&quot;, or &quot;fill&quot;</span>

<span class="kw">grid.arrange</span>(p1, p2, p3, p4,  <span class="dt">ncol=</span><span class="dv">2</span>)
<span class="co">#R&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span>
<span class="co">#R&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span>
<span class="co">#R&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-122-1.png" width="672" /></p>
<p>A more general bar plot can be obtained with <code>geom_bar()</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;mtcars&quot;</span>)
mtcars<span class="op">$</span>cyl &lt;-<span class="st"> </span><span class="kw">as.factor</span>(mtcars<span class="op">$</span>cyl) <span class="co"># changing &#39;cyl&#39; to factor, which is actually is </span>
mtcars<span class="op">$</span>am &lt;-<span class="st"> </span><span class="kw">as.factor</span>(mtcars<span class="op">$</span>am)
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x=</span>cyl, <span class="dt">fill=</span>am)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_bar</span>(<span class="dt">position=</span><span class="st">&quot;stack&quot;</span>)
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x=</span>cyl, <span class="dt">fill=</span>am)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_bar</span>(<span class="dt">position=</span><span class="st">&quot;dodge&quot;</span>) <span class="co"># or &quot;stack&quot;, or &quot;fill&quot;</span>

posn_d &lt;-<span class="st"> </span><span class="kw">position_dodge</span>(<span class="dt">width=</span>.<span class="dv">2</span>) <span class="co"># like for jitter</span>
p3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x=</span>cyl, <span class="dt">fill=</span>am)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_bar</span>(<span class="dt">position=</span>posn_d, <span class="dt">alpha=</span>.<span class="dv">6</span>)

p4 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(mpg, <span class="dt">fill=</span>cyl)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">position=</span><span class="st">&quot;identity&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">4</span>)


<span class="kw">grid.arrange</span>(p1, p2, p3, p4,  <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a=</span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">b=</span><span class="kw">rep</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>,<span class="dv">6</span>))

p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x=</span>a, <span class="dt">y=</span>b)) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_bar</span>(<span class="dt">position=</span><span class="st">&quot;stack&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.7</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Probability distribution of die roll&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Value on the die (x)&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;P(x)&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">limits=</span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))
      
p1</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
</div>
<div id="line-plots-1" class="section level3">
<h3><span class="header-section-number">19.5.3</span> Line plots</h3>
<p>Particularly suited for line plots over time</p>
<pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(economics, <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> unemploy)) <span class="op">+</span><span class="st"> </span>
<span class="kw">geom_line</span>()

<span class="kw">data</span>(<span class="st">&quot;beavers&quot;</span>)
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(beaver1, <span class="kw">aes</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> temp, <span class="dt">col=</span><span class="kw">factor</span>(activ))) <span class="op">+</span><span class="st"> </span>
<span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group=</span><span class="dv">1</span>)) <span class="co"># group = 1 indicates you want a single line connecting all the points, you can set group=variable</span>

<span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre>
<p><img src="MyR_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="dplyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functionals.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["MyR.pdf", "MyR.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
